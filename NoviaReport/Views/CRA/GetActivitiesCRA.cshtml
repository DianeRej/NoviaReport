@model NoviaReport.ViewModels.CraActivitiesViewModel
@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/css/styleTabActivitiesCra.css" />
</head>


<body>
    <!----------------------------------------------------- HEADER ---------------------------------------------->
    <header>
        <img src="/Images/4.png" />

        <div class="boutons">
            <a href="/Login/Deconnexion"><button>Déconnexion</button></a>
        </div>
    </header>

    <!---------------------------------------------------  Side-nav ------------------------------------------------>
    <nav class="side-nav">
        <div class="wrapper">
            <div class="nav-bloc n-1">
                <svg fill="#000000"
                     width="30px"
                     height="30px"
                     viewBox="0 0 23 23"
                     xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                          d="M14.5859179,11.4781966 C14.8490434,11.9243482 15,12.4445452 15,13 C15,14.6568542 13.6568542,16 12,16 C10.3431458,16 9,14.6568542 9,13 C9,11.3431458 10.3431458,10 12,10 C12.3685381,10 12.7215551,10.0664537 13.047722,10.1880321 L15.6807681,6.42653766 L17.3192319,7.57346234 L14.5859179,11.4781966 Z M5.39835032,21.7994935 C2.65046282,19.7349529 1,16.5036875 1,13 C1,6.92486775 5.92486775,2 12,2 C18.0751322,2 23,6.92486775 23,13 C23,16.5036875 21.3495372,19.7349529 18.6016497,21.7994935 L18.3347771,22 L5.66522295,22 L5.39835032,21.7994935 Z M17.6574682,20 C19.7530206,18.305007 21,15.7569911 21,13 C21,8.02943725 16.9705627,4 12,4 C7.02943725,4 3,8.02943725 3,13 C3,15.7569911 4.24697938,18.305007 6.34253177,20 L17.6574682,20 Z M12,14 C12.5522847,14 13,13.5522847 13,13 C13,12.4477153 12.5522847,12 12,12 C11.4477153,12 11,12.4477153 11,13 C11,13.5522847 11.4477153,14 12,14 Z" />
                </svg>
            </div>

            <div class="nav-bloc n-2">
                <svg width="27px"
                     height="27px"
                     viewBox="0 0 36 36"
                     version="1.1"
                     preserveAspectRatio="xMidYMid meet"
                     xmlns="http://www.w3.org/2000/svg"
                     xmlns:xlink="http://www.w3.org/1999/xlink">
                    <title>notification-line</title>
                    <path class="clr-i-outline clr-i-outline-path-1"
                          d="M32.51,27.83A14.4,14.4,0,0,1,30,24.9a12.63,12.63,0,0,1-1.35-4.81V15.15A10.81,10.81,0,0,0,19.21,4.4V3.11a1.33,1.33,0,1,0-2.67,0V4.42A10.81,10.81,0,0,0,7.21,15.15v4.94A12.63,12.63,0,0,1,5.86,24.9a14.4,14.4,0,0,1-2.47,2.93,1,1,0,0,0-.34.75v1.36a1,1,0,0,0,1,1h27.8a1,1,0,0,0,1-1V28.58A1,1,0,0,0,32.51,27.83ZM5.13,28.94a16.17,16.17,0,0,0,2.44-3,14.24,14.24,0,0,0,1.65-5.85V15.15a8.74,8.74,0,1,1,17.47,0v4.94a14.24,14.24,0,0,0,1.65,5.85,16.17,16.17,0,0,0,2.44,3Z"></path>
                    <path class="clr-i-outline clr-i-outline-path-2"
                          d="M18,34.28A2.67,2.67,0,0,0,20.58,32H15.32A2.67,2.67,0,0,0,18,34.28Z"></path>
                </svg>
                <div class="sub-nav">
                    <h2>Notification</h2>
                    <ul>
                        <li>
                            <a>Link</a>
                        </li>
                        <li>
                            <a>Link</a>
                        </li>
                        <li>
                            <a>Link</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="nav-bloc n-3">
                <svg width="27px"
                     height="27px"
                     aria-hidden="true"
                     focusable="false"
                     data-prefix="far"
                     data-icon="file"
                     class="svg-inline--fa fa-file fa-w-12"
                     role="img"
                     xmlns="http://www.w3.org/2000/svg"
                     viewBox="0 0 384 512">
                    <path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48z"></path>
                </svg>
                <div class="sub-nav">
                    <h2>CRA</h2>
                    <ul>
                        <li>
                            <a>Utilisateur et ses CRA</a>
                        </li>
                        <li>
                            <a>Etat et liste d'activités CRAs</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="nav-bloc n-4">
                <svg width="27px"
                     height="27px"
                     aria-hidden="true"
                     focusable="false"
                     data-prefix="fas"
                     data-icon="cog"
                     class="svg-inline--fa fa-cog fa-w-16"
                     role="img"
                     xmlns="http://www.w3.org/2000/svg"
                     viewBox="0 0 512 512">
                    <path d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"></path>
                </svg>
                <div class="sub-nav">
                    <h2>Subtitle 3</h2>
                    <ul>
                        <li>
                            <a>Link</a>
                        </li>
                        <li>
                            <a>Link</a>
                        </li>
                        <li>
                            <a>Link</a>
                        </li>
                        <li></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <!--------------------------- -------------------------------------------->
    <div style="display: flex; flex-direction: column">
        <div>
            <h2>Liste d'activités CRA</h2>

            <p>Etat du CRA : </p>
            <p>@Model.Cra.State</p>

            @if (User.IsInRole("SALARIE") && Model.Cra.State.Equals(NoviaReport.Models.State.INCOMPLET))
            {
                <a href="/cra/createactivity/@Model.Cra.Id"><button>Ajouter une activité</button></a>

            }
            else if (User.IsInRole("SALARIE") && Model.Cra.State.Equals(NoviaReport.Models.State.NON_VALIDE))
            {
                <a href="/cra/createactivity/@Model.Cra.Id"><button>Ajouter une activité</button></a>
            }

            @if (User.IsInRole("MANAGER") && Model.Cra.State.Equals(NoviaReport.Models.State.EN_COURS_DE_VALIDATION))
            {
                <a href="">Valider le CRA</a>
                //mettre le lien de l'action ValidateCRA
                <a href="">Renvoyer le CRA pour modification</a>
                //mettre le lien de l'action InvalidateCRA

            }

            <table id="table">
                <tr>
                    <th>Date Activité </th>
                    <th>Type d'activité</th>
                    <th>Client</th>
                    <th>Date du CRA</th>
                </tr>
                @foreach (NoviaReport.Models.CraActivity craActivity in Model.CraActivities as List<NoviaReport.Models.CraActivity>)
                {
                    <tr>
                        <td>@craActivity.Activity.Date.ToString("d")</td>
                        <td>@Html.DisplayFor(ca=>craActivity.Activity.TypeActivity)</td>
                        <td>@Html.DisplayFor(ca=>craActivity.Activity.Client)</td>
                        <td>@craActivity.CRA.Date.ToString("d")</td>
                    </tr>
                }
            </table>
        </div>
    </div>

    

    @*/CRA/GetActivitiesCRA*@

</body>
</html>





